<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Antique Auction House</title>
  <link href="style.css" rel="stylesheet">
  <style>* {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Georgia', serif;
      background: #f5f1e9;
      color: #2b2b2b;
      line-height: 1.6;
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    img {
      max-width: 100%;
      display: block;
    }
    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      padding-bottom: 60px;
    }
    .header {
      background-color: #4a3728;
      color: #fff;
      padding: 20px 0;
      box-shadow: 0 4px 10px rgba(74,55,40,0.5);
      position: sticky;
      top: 0;
      z-index: 100;
      height: 64px;
    }
    .header__container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 100%;
    }
    .header__logo {
      font-family: 'Times New Roman', serif;
      font-size: 1.8rem;
      letter-spacing: 2px;
      cursor: default;
      user-select: none;
    }
    .nav__list {
      list-style: none;
      display: flex;
      gap: 25px;
    }
    .nav__item {
      font-weight: 600;
      font-size: 1rem;
    }
    .nav__link {
      color: #e6d9c6;
      padding: 5px 10px;
      border-radius: 5px;
      transition: background-color 0.3s ease, color 0.3s ease;
      cursor: pointer;
      display: inline-block;
    }
    .nav__link:hover,
    .nav__link--active {
      background-color: #a68a64;
      color: #4a3728;
    }
    .bid-icon {
      position: fixed;
      top: 64px;
      right: 20px;
      cursor: pointer;
      color: #e6d9c6;
      font-size: 28px;
      width: 48px;
      height: 48px;
      background-color: #4a3728;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 3px 6px rgba(74,55,40,0.4);
      transition: background-color 0.3s ease;
      z-index: 1100;
    }
    .bid-icon:hover {
      background-color: #a68a64;
      color: #4a3728;
    }
    .bid-icon svg {
      fill: currentColor;
      width: 24px;
      height: 24px;
    }
    .bid-badge {
      position: absolute;
      top: -6px;
      right: -6px;
      background-color: #b22222;
      color: white;
      font-weight: 700;
      font-size: 0.75rem;
      border-radius: 50%;
      padding: 3px 7px;
      min-width: 20px;
      height: 20px;
      line-height: 14px;
      text-align: center;
      pointer-events: none;
    }
    .page-section {
      display: none;
      padding: 40px 0;
    }
    .page-section--active {
      display: block;
    }
    .home {
      background: url('content/images/main.jpg') center center/cover no-repeat;
      height: 80vh;
      color: #fff;
      text-shadow: 1px 1px 8px rgba(0,0,0,0.7);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      border-radius: 10px;
      margin-bottom: 40px;
      position: relative;
      transition: height 0.5s ease;
    }
    .home--reduced {
      height: 40vh;
    }
    .home__title {
      font-size: 3.5rem;
      margin-bottom: 15px;
      font-family: 'Times New Roman', serif;
    }
    .home__subtitle {
      font-size: 1.3rem;
      max-width: 600px;
    }
    .button {
      margin-top: 25px;
      background-color: #a68a64;
      color: #4a3728;
      padding: 12px 30px;
      font-size: 1.1rem;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 700;
      box-shadow: 0 5px 10px rgba(166,138,100,0.5);
      transition: background-color 0.3s ease;
      user-select: none;
    }
    .button:hover {
      background-color: #8b6f47;
      color: #fff;
    }
    .button--hidden {
      display: none !important;
    }
    .lots {
      max-width: 1200px;
    }
    .lots__title {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5rem;
    }
    .lots__list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
    }
    .lot__item {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 8px 15px rgba(74,55,40,0.15);
      padding: 20px;
      text-align: center;
      transition: transform 0.3s ease;
      cursor: default;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .lot__item:hover {
      transform: translateY(-8px);
    }
    .lot__img {
      border-radius: 10px;
      margin-bottom: 15px;
      width: 100%;
      height: 350px;
      object-fit: cover;
    }
    .lot__item-title {
      font-size: 1.3rem;
      margin-bottom: 10px;
    }
    .lot__item-description {
      font-size: 0.95rem;
      color: #4a3728;
      margin-bottom: 10px;
    }
    .lot__item-price {
      font-weight: 700;
      font-size: 1.1rem;
      color: #a68a64;
      margin-bottom: 10px;
    }
    .lot__item-bid {
      margin-top: auto;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .lot__btn-bid {
      padding: 8px 16px;
      font-weight: 600;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
      font-size: 0.95rem;
      background-color: #8b6f47;
      color: white;
    }
    .lot__btn-bid:hover {
      background-color: #a68a64;
      color: #4a3728;
    }
    .bids {
      max-width: 800px;
      margin: 0 auto;
    }
    .bids__title {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5rem;
    }
    .bids__list {
      list-style: none;
      padding: 0;
      margin-bottom: 30px;
    }
    .bids__item {
      background: #fff;
      padding: 15px 20px;
      border-radius: 10px;
      margin-bottom: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 8px rgba(74,55,40,0.1);
    }
    .bids__item-info {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .bids__item-name {
      font-weight: 700;
      font-size: 1.1rem;
    }
    .bids__item-amount {
      font-size: 0.95rem;
      color: #4a3728;
    }
    .bids__empty {
      text-align: center;
      font-size: 1.2rem;
      color: #4a3728;
    }
    .bids__btn-confirm {
      display: block;
      background-color: #8b6f47;
      color: white;
      padding: 14px 0;
      width: 100%;
      border: none;
      border-radius: 30px;
      font-weight: 700;
      font-size: 1.2rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    .bids__btn-confirm:hover {
      background-color: #a68a64;
      color: #4a3728;
    }
    .confirmation {
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
    }
    .confirmation__title {
      font-size: 2.8rem;
      margin-bottom: 30px;
      color: #4a3728;
    }
    .confirmation__text {
      font-size: 1.2rem;
      color: #4a3728;
      margin-bottom: 20px;
    }
    .confirmation__sequence {
      font-size: 1.3rem;
      font-weight: 700;
      color: #a68a64;
      margin-bottom: 20px;
    }
    .confirmation__total {
      font-size: 1.3rem;
      font-weight: 700;
      color: #a68a64;
      margin-bottom: 20px;
    }
    .confirmation__items {
      background: #fff7f0;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 6px 13px rgba(74,55,40,0.1);
      margin-bottom: 30px;
      text-align: left;
    }
    .confirmation__item {
      font-size: 1.1rem;
      margin-bottom: 15px;
      color: #4a3728;
    }
    .confirmation__item-price {
      font-size: 0.95rem;
      color: #a68a64;
      margin-left: 20px;
    }
    .confirmation__btn-back {
      background-color: #4a3728;
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 700;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .confirmation__btn-back:hover {
      background-color: #a68a64;
      color: #4a3728;
    }
    .about {
      background: #fff7f0;
      border-radius: 15px;
      padding: 40px 30px;
      box-shadow: 0 8px 15px rgba(74,55,40,0.1);
      max-width: 900px;
      margin: 0 auto 40px;
    }
    .about__title {
      text-align: center;
      font-size: 2.8rem;
      margin-bottom: 30px;
      color: #4a3728;
    }
    .about__text {
      font-size: 1.15rem;
      color: #4a3728;
      line-height: 1.7;
    }
    .contacts {
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
    }
    .contacts__title {
      font-size: 2.5rem;
      margin-bottom: 25px;
      color: #4a3728;
    }
    .contacts__text {
      margin-bottom: 15px;
      font-size: 1.1rem;
      color: #4a3728;
    }
    .contacts__info {
      background: #fff7f0;
      border-radius: 15px;
      padding: 25px 20px;
      box-shadow: 0 6px 13px rgba(74,55,40,0.1);
    }
    .contacts__info p {
      font-weight: 600;
      margin-bottom: 10px;
    }
    main.container {
      margin-top: 0;
      padding-top: 0;
    }
    @media (max-width: 900px) {
      .lots__list {
        grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      }
      .confirmation__items {
        padding: 15px;
      }
    }
    @media (max-width: 720px) {
      .nav__list {
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .header__container {
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
      }
      .header__logo {
        font-size: 1.6rem;
      }
      .home__title {
        font-size: 2.5rem;
      }
      .home__subtitle {
        font-size: 1rem;
        max-width: 90%;
      }
      .lot__btn-bid {
        font-size: 0.9rem;
        padding: 6px 12px;
      }
    }
    @media (max-width: 480px) {
      .lots__list {
        grid-template-columns: 1fr;
      }
      .button {
        padding: 12px 20px;
        font-size: 1rem;
      }
      .about {
        padding: 30px 20px;
      }
      .home {
        height: 65vh;
        padding: 0 15px;
      }
      .nav__link {
        padding: 5px 8px;
        font-size: 0.95rem;
      }
      .confirmation__items {
        padding: 10px;
      }
    }</style>
</head>
<body>
  <header class="header" role="banner">
    <div class="header__container">
      <div class="header__logo">Antique Auction House</div>
      <nav class="nav" role="navigation" aria-label="Main site navigation">
        <ul class="nav__list">
          <li class="nav__item"><a href="#" class="nav__link nav__link--active" data-target="home">Home</a></li>
          <li class="nav__item"><a href="#" class="nav__link" data-target="lots">Lots</a></li>
          <li class="nav__item"><a href="#" class="nav__link" data-target="about">About</a></li>
          <li class="nav__item"><a href="#" class="nav__link" data-target="contacts">Contacts</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <div class="bid-icon" title="Your Bids" aria-label="View your bids" tabindex="0" role="button">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" focusable="false">
      <path d="M16.5 3h-9A2.5 2.5 0 005 5.5v13A2.5 2.5 0 007.5 21h9a2.5 2.5 0 002.5-2.5v-13A2.5 2.5 0 0016.5 3zm-2.5 13h-4v-2h4v2zm0-3h-4v-2h4v2zm0-3h-4V8h4v2z"/>
    </svg>
    <span class="bid-badge" id="bid-count" style="display:none;">0</span>
  </div>
  <main class="container" role="main">
    <section id="home" class="page-section home page-section--active" aria-label="Home page">
      <h1 class="home__title">Antique Auction House</h1>
      <p class="home__subtitle">Discover timeless treasures and place your bids on exquisite antiques.</p>
      <button class="button button--primary" id="btn-view-lots" data-target="lots" aria-controls="lots">View Auction Lots</button>
    </section>
    <section id="lots" class="page-section lots" aria-label="Auction lots">
      <h2 class="lots__title">Current Auction Lots</h2>
      <div class="lots__list" id="lots-list"></div>
    </section>
    <section id="bids" class="page-section bids" aria-label="Your bids" tabindex="0">
      <h2 class="bids__title">Your Bids</h2>
      <ul class="bids__list" id="bids-list"></ul>
      <p class="bids__empty" id="bids-empty">You have not placed any bids yet.</p>
      <button class="bids__btn-confirm button--primary button" id="bids-confirm-btn" aria-label="Confirm your bids"></button>
    </section>
    <section id="confirmation" class="page-section confirmation" aria-label="Bid confirmation" aria-live="polite">
      <h2 class="confirmation__title">Bid Confirmation</h2>
      <p class="confirmation__sequence" id="confirmation-sequence">Bid ID...</p>
      <p class="confirmation__text" id="confirmation-text">Processing your bids...</p>
      <p class="confirmation__total" id="confirmation-total">Total: $0</p>
      <div class="confirmation__items" id="confirmation-items"></div>
      <button class="confirmation__btn-back" id="confirmation-back-btn" aria-label="Return to lots">Return to Lots</button>
    </section>
    <section id="about" class="page-section about" aria-label="About the auction house">
      <h2 class="about__title">About Our Auction House</h2>
      <p class="about__text">
        Antique Auction House is your premier destination for acquiring rare and valuable antiques. We curate a selection of timeless pieces, from vintage furniture to classic art, ensuring every lot tells a story.
      </p>
      <p class="about__text">
        Our auctions are designed to be accessible and exciting, allowing collectors and enthusiasts to bid on unique items. Each piece is authenticated by our experts, guaranteeing quality and provenance.
      </p>
      <p class="about__text">
        Join us to experience the thrill of the auction and own a piece of history. Whether you're a seasoned collector or a new bidder, we welcome you to explore our curated lots.
      </p>
    </section>
    <section id="contacts" class="page-section contacts" aria-label="Contact information">
      <h2 class="contacts__title">Contact Information</h2>
      <div class="contacts__info">
        <p class="contacts__text"><strong>Address:</strong> 123 Heritage Lane, London, UK</p>
        <p class="contacts__text"><strong>Phone:</strong> +44 (0)20 1234 5678</p>
        <p class="contacts__text"><strong>Email:</strong> contact@antiqueauctionhouse.com</p>
        <p class="contacts__text"><strong>Hours:</strong> Mon-Sat: 09:00 - 18:00</p>
      </div>
    </section>
  </main>
  <footer class="footer" role="contentinfo">
    © 2025 Antique Auction House. All rights reserved.
  </footer>
  <script src="script.js">
        const lots = [
      { id: 'vase', name: 'Ming Dynasty Vase', description: 'A rare 15th-century porcelain vase.', currentBid: 850000, image: 'content/images/vase.jpg' },
      { id: 'painting', name: 'Victorian Landscape', description: 'Oil on canvas, 19th century.', currentBid: 1200, image: 'content/images/painting.jpg' },
      { id: 'chair', name: 'Regency Armchair', description: 'Mahogany armchair, circa 1820.', currentBid: 800, image: 'content/images/chair.jpg' },
      { id: 'clock', name: 'French Mantle Clock', description: 'Gilt bronze clock, 18th century.', currentBid: 1500, image: 'content/images/clock.jpg' },
      { id: 'mirror', name: 'Baroque Mirror', description: 'Ornate giltwood mirror, 17th century.', currentBid: 900, image: 'content/images/mirror.jpg' },
      { id: 'desk', name: 'Georgian Writing Desk', description: 'Walnut desk with inlay, circa 1780.', currentBid: 2000, image: 'content/images/desk.jpg' },
      { id: 'lamp', name: 'Tiffany Lamp', description: 'Stained glass lamp, early 20th century.', currentBid: 2500, image: 'content/images/lamp.jpg' },
      { id: 'rug', name: 'Persian Rug', description: 'Handwoven silk rug, 19th century.', currentBid: 1800, image: 'content/images/rug.jpg' },
      { id: 'sculpture', name: 'Bronze Sculpture', description: 'Classical figure, 18th century.', currentBid: 1100, image: 'content/images/sculpture.jpg' }
    ];

    // as { lotId: { bidAmount } }
    let bids = {};
    let lastBids = null;

    const lotsList = document.getElementById('lots-list');
    const bidsList = document.getElementById('bids-list');
    const bidsEmpty = document.getElementById('bids-empty');
    const bidsConfirmBtn = document.getElementById('bids-confirm-btn');
    const bidCount = document.getElementById('bid-count');
    const bidIcon = document.querySelector('.bid-icon');
    const sections = document.querySelectorAll('.page-section');
    const navLinks = document.querySelectorAll('.nav__link');
    const btnViewLots = document.getElementById('btn-view-lots');
    const homeSection = document.getElementById('home');
    const confirmationText = document.getElementById('confirmation-text');
    const confirmationSequence = document.getElementById('confirmation-sequence');
    const confirmationTotal = document.getElementById('confirmation-total');
    const confirmationItems = document.getElementById('confirmation-items');

    function generateRandomSequence() {
      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < 6; i++) {
        result += characters.charAt(Math.floor(Math.random() * characters.length));
      }
      return result;
    }

    function saveBids() {
      localStorage.setItem('auction_bids', JSON.stringify(bids));
    }

    function loadBids() {
      try {
        const saved = localStorage.getItem('auction_bids');
        if (saved) {
          bids = JSON.parse(saved);
          if (typeof bids !== 'object' || bids === null) {
            bids = {};
          }
        } else {
          bids = {};
        }
      } catch (e) {
        console.error('Failed to load bids from localStorage:', e);
        bids = {};
      }
    }

    function updateBidBadge() {
      const totalBids = Object.keys(bids).length;
      bidCount.style.display = totalBids > 0 ? 'inline-block' : 'none';
      bidCount.textContent = totalBids;
    }

    function renderLots() {
      lotsList.innerHTML = '';
      lots.forEach(lot => {
        const article = document.createElement('article');
        article.className = 'lot__item';
        article.innerHTML = `
          <img src="${lot.image}" alt="${lot.name}" class="lot__img" />
          <h3 class="lot__item-title">${lot.name}</h3>
          <p class="lot__item-description">${lot.description}</p>
          <div class="lot__item-price">Current Bid: $${lot.currentBid}</div>
          <div class="lot__item-bid">
            <button class="lot__btn-bid" data-id="${lot.id}" data-amount="10">Bid +$10</button>
            <button class="lot__btn-bid" data-id="${lot.id}" data-amount="50">Bid +$50</button>
            <button class="lot__btn-bid" data-id="${lot.id}" data-amount="100">Bid +$100</button>
          </div>
        `;
        lotsList.appendChild(article);
      });
    }

    function renderBids() {
      bidsList.innerHTML = '';
      const lotIds = Object.keys(bids);
      if (lotIds.length === 0) {
        bidsEmpty.style.display = 'block';
        bidsConfirmBtn.innerHTML = `Browse Lots`;
        return;
      }
      bidsEmpty.style.display = 'none';
      let totalBidAmount = 0;
      lotIds.forEach(lotId => {
        const bidAmount = bids[lotId].bidAmount;
        const lot = lots.find(l => l.id === lotId);
        if (!lot) {
          console.warn(`Lot with ID ${lotId} not found, skipping`);
          return;
        }
        const li = document.createElement('li');
        li.className = 'bids__item';
        li.setAttribute('data-lot-id', lotId);
        totalBidAmount += bidAmount;
        li.innerHTML = `
          <div class="bids__item-info">
            <div class="bids__item-name">${lot.name}</div>
            <div class="bids__item-amount">Your Bid: $${bidAmount}</div>
          </div>
        `;
        bidsList.appendChild(li);
      });
      bidsConfirmBtn.innerHTML = `Confirm Bids (Total: $${totalBidAmount})`;
    }

    function clearBids() {
      bids = {};
      saveBids();
      updateBidBadge();
      renderLots();
    }

    function setActiveSection(targetId) {
      sections.forEach(section => {
        section.classList.toggle('page-section--active', section.id === targetId);
      });
      navLinks.forEach(link => {
        link.classList.toggle('nav__link--active', link.dataset.target === targetId);
      });
      btnViewLots.classList.toggle('button--hidden', targetId !== 'home');
      homeSection.classList.toggle('home--reduced', targetId !== 'home');
      if (targetId === 'bids') {
        renderBids();
      } else if (targetId === 'lots') {
        renderLots();
      }
    }

    function showConfirmation(totalBids, totalAmount, bidItems) {
      setActiveSection('confirmation');
      const randomSequence = generateRandomSequence();
      confirmationSequence.textContent = `Bid ID: ${randomSequence}`;
      confirmationText.textContent = `You have placed ${totalBids} bid(s). Thank you for participating!`;
      confirmationTotal.textContent = `Total: $${totalAmount}`;
      confirmationItems.innerHTML = '';
      bidItems.forEach(({ lot, bidAmount }) => {
        if (!lot) {
          console.warn('Invalid lot in bidItems, skipping');
          return;
        }
        const div = document.createElement('div');
        div.className = 'confirmation__item';
        div.innerHTML = `
          ${lot.name}
          <div class="confirmation__item-price">Bid: $${bidAmount}</div>
        `;
        confirmationItems.appendChild(div);
      });
    }

    function handleLotButtonClick(e) {
      const target = e.target;
      if (!target.classList.contains('lot__btn-bid')) return;
      const lotId = target.dataset.id;
      const bidIncrement = parseInt(target.dataset.amount, 10);
      if (!lotId || isNaN(bidIncrement)) return;
      const lot = lots.find(l => l.id === lotId);
      if (!lot) {
        console.error(`Lot with ID ${lotId} not found`);
        return;
      }
      const newBid = lot.currentBid + bidIncrement;
      if (bids[lotId] && bids[lotId].bidAmount >= newBid) {
        alert(`Your current bid of $${bids[lotId].bidAmount} is higher than or equal to the proposed bid of $${newBid}. Please place a higher bid.`);
        return;
      }
      lot.currentBid = newBid;
      bids[lotId] = { bidAmount: newBid };
      saveBids();
      updateBidBadge();
      renderLots();
    }

    function handleBidIconClick() {
      setActiveSection('bids');
    }

    function handleBidsConfirmClick() {
      const totalBids = Object.keys(bids).length;
      if (totalBids === 0) {
        setActiveSection('lots');
        window.scrollTo({ top: 0, behavior: 'smooth' });
        bidsConfirmBtn.innerHTML = `Browse Lots`;
        return;
      }
      const totalAmount = Object.values(bids).reduce((acc, bid) => acc + bid.bidAmount, 0);
      lastBids = Object.keys(bids).map(lotId => {
        const lot = lots.find(l => l.id === lotId);
        if (!lot) {
          console.warn(`Lot with ID ${lotId} not found, skipping`);
          return null;
        }
        return { lot, bidAmount: bids[lotId].bidAmount };
      }).filter(bid => bid !== null);
      clearBids();
      showConfirmation(totalBids, totalAmount, lastBids);
    }

    function handleConfirmationBackClick() {
      setActiveSection('lots');
      lastBids = null;
    }

    function init() {
      loadBids();
      updateBidBadge();
      renderLots();
      lotsList.addEventListener('click', handleLotButtonClick);
      bidIcon.addEventListener('click', handleBidIconClick);
      bidsConfirmBtn.addEventListener('click', handleBidsConfirmClick);
      document.getElementById('confirmation-back-btn').addEventListener('click', handleConfirmationBackClick);
      document.querySelector('.nav__list').addEventListener('click', e => {
        const link = e.target.closest('.nav__link');
        if (link) {
          e.preventDefault();
          setActiveSection(link.dataset.target);
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
      btnViewLots.addEventListener('click', () => {
        setActiveSection('lots');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }

    window.onload = init;
  </script>
</body>
</html>